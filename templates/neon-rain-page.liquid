{% comment %}
  Neon Rain Page Template for Dirtylolli Shopify Theme
  Enhanced cyberpunk experience with immersive visual effects
  Includes chapter-based navigation with progressive unlocking
{% endcomment %}

<!-- Chapter Navigation -->
{% render 'neon-rain-navigation' %}

<main class="relative w-full min-h-screen overflow-x-hidden bg-noir text-white font-body">
  <!-- Enhanced Rain Overlay Effect -->
  <div class="fixed inset-0 pointer-events-none z-10" id="rain-container">
    <div class="relative w-full h-full">
      <!-- Dynamic rain drops generated by JavaScript -->
    </div>
  </div>

  <!-- Cyberpunk Grid Background -->
  <div class="fixed inset-0 pointer-events-none z-5 cyber-grid opacity-20"></div>

  <!-- Floating Particles -->
  <div class="fixed inset-0 pointer-events-none z-8" id="particles-container">
    <!-- Particles will be generated by JavaScript -->
  </div>

  <!-- Glitch Overlay -->
  <div class="fixed inset-0 pointer-events-none z-15 glitch-overlay"></div>

  <!-- Scene Scroll Wrapper -->
  <div class="relative z-20">
    <!-- Chapter 1: The Awakening -->
    <section id="chapter-1" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 chapter-section" data-chapter="1">
      <div class="text-center max-w-6xl relative">
        <!-- Chapter Number Badge -->
        <div class="inline-flex items-center px-4 py-2 rounded-full bg-gradient-to-r from-accent/20 to-primary/20 border border-accent/50 mb-6">
          <span class="text-accent font-bold text-sm">CHAPTER 01</span>
        </div>
        
        <!-- Main Heading with Glitch Effect -->
        <h2 class="text-6xl md:text-8xl font-headline mb-8 glitch-text" data-text="THE AWAKENING">
          <span class="bg-gradient-to-r from-accent via-primary to-neon bg-clip-text text-transparent">
            THE AWAKENING
          </span>
        </h2>
        
        <!-- Subtitle -->
        <div class="text-2xl md:text-3xl text-gray-300 mb-12 font-light tracking-wider">
          Where the digital rain begins
        </div>
        
        <!-- Main Content -->
        <div class="text-lg md:text-xl text-gray-300 mb-12 leading-relaxed max-w-4xl mx-auto">
          <p class="mb-6">In the neon-lit streets of the future, where rain falls in digital streams and reality bends at the edges, a new consciousness awakens. The city pulses with electric dreams, and every drop of rain carries a message from the beyond.</p>
          <p class="mb-6">Welcome to the world of Dirtylolli, where cyberpunk meets streetwear, and every piece tells a story of rebellion, innovation, and the relentless pursuit of the extraordinary.</p>
        </div>
        
        <!-- Interactive Elements -->
        <div class="flex flex-col md:flex-row gap-6 justify-center items-center mb-12">
          <button class="neon-button primary" onclick="scrollToChapter(2)">
            <span>Enter the Digital Realm</span>
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </button>
          <button class="neon-button secondary" onclick="toggleSound()">
            <span id="sound-text">Enable Audio</span>
            <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L5.5 15H3a1 1 0 01-1-1V6a1 1 0 011-1h2.5l2.883-2.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z" clip-rule="evenodd"></path>
            </svg>
          </button>
        </div>
        
        <!-- Background Effects -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-gradient-to-r from-accent/10 to-primary/10 animate-pulse pointer-events-none"></div>
        <div class="absolute top-1/4 right-1/4 w-32 h-32 rounded-full bg-gradient-to-r from-neon/20 to-accent/20 animate-bounce pointer-events-none"></div>
        <div class="absolute bottom-1/4 left-1/4 w-24 h-24 rounded-full bg-gradient-to-r from-primary/20 to-neon/20 animate-ping pointer-events-none"></div>
      </div>
    </section>

    <!-- Chapter 2: Digital Dreams -->
    <section id="chapter-2" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 chapter-section" data-chapter="2">
      <div class="text-center max-w-6xl relative">
        <!-- Chapter Number Badge -->
        <div class="inline-flex items-center px-4 py-2 rounded-full bg-gradient-to-r from-primary/20 to-neon/20 border border-primary/50 mb-6">
          <span class="text-primary font-bold text-sm">CHAPTER 02</span>
        </div>
        
        <!-- Main Heading -->
        <h2 class="text-6xl md:text-8xl font-headline mb-8 glitch-text" data-text="DIGITAL DREAMS">
          <span class="bg-gradient-to-r from-primary via-neon to-accent bg-clip-text text-transparent">
            DIGITAL DREAMS
          </span>
        </h2>
        
        <!-- Subtitle -->
        <div class="text-2xl md:text-3xl text-gray-300 mb-12 font-light tracking-wider">
          Where pixels dance with purpose
        </div>
        
        <!-- Main Content -->
        <div class="text-lg md:text-xl text-gray-300 mb-12 leading-relaxed max-w-4xl mx-auto">
          <p class="mb-6">In this digital realm, every pixel tells a story. The neon lights flicker with the rhythm of the city's heartbeat, and the rain becomes a canvas for infinite possibilities.</p>
          <p class="mb-6">Explore our collection of cyberpunk streetwear, where technology meets fashion in the most unexpected ways. Each piece is designed to make a statement in the digital age.</p>
        </div>
        
        <!-- Interactive Elements -->
        <div class="flex flex-col md:flex-row gap-6 justify-center items-center mb-12">
          <button class="neon-button primary" onclick="scrollToChapter(3)">
            <span>Continue the Journey</span>
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </button>
          <button class="neon-button secondary" onclick="scrollToProducts()">
            <span>View Collection</span>
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
          </button>
        </div>
        
        <!-- Background Effects -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-gradient-to-r from-primary/10 to-neon/10 animate-pulse pointer-events-none"></div>
        <div class="absolute top-1/4 left-1/4 w-32 h-32 rounded-full bg-gradient-to-r from-accent/20 to-primary/20 animate-bounce pointer-events-none"></div>
        <div class="absolute bottom-1/4 right-1/4 w-24 h-24 rounded-full bg-gradient-to-r from-neon/20 to-accent/20 animate-ping pointer-events-none"></div>
      </div>
    </section>

    <!-- Chapter 3: Electric Souls -->
    <section id="chapter-3" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 chapter-section" data-chapter="3">
      <div class="text-center max-w-6xl relative">
        <!-- Chapter Number Badge -->
        <div class="inline-flex items-center px-4 py-2 rounded-full bg-gradient-to-r from-neon/20 to-accent/20 border border-neon/50 mb-6">
          <span class="text-neon font-bold text-sm">CHAPTER 03</span>
        </div>
        
        <!-- Main Heading -->
        <h2 class="text-6xl md:text-8xl font-headline mb-8 glitch-text" data-text="ELECTRIC SOULS">
          <span class="bg-gradient-to-r from-neon via-accent to-primary bg-clip-text text-transparent">
            ELECTRIC SOULS
          </span>
        </h2>
        
        <!-- Subtitle -->
        <div class="text-2xl md:text-3xl text-gray-300 mb-12 font-light tracking-wider">
          Where neon signs pulse with the city's heartbeat
        </div>
        
        <!-- Main Content -->
        <div class="text-lg md:text-xl text-gray-300 mb-12 leading-relaxed max-w-4xl mx-auto">
          <p class="mb-6">In this cyberpunk symphony, where neon signs pulse with the heartbeat of the city, we find the electric souls who dare to dream in digital colors.</p>
          <p class="mb-6">This is where fashion meets the future, where every thread is woven with the energy of the streets, and every design tells the story of rebellion and innovation.</p>
        </div>
        
        <!-- Interactive Elements -->
        <div class="flex flex-col md:flex-row gap-6 justify-center items-center mb-12">
          <button class="neon-button primary" onclick="scrollToProducts()">
            <span>Discover the Collection</span>
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
            </svg>
          </button>
          <button class="neon-button secondary" onclick="scrollToChapter(4)">
            <span>Continue Journey</span>
            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </button>
        </div>
        
        <!-- Background Effects -->
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 rounded-full bg-gradient-to-r from-neon/10 to-accent/10 animate-pulse pointer-events-none"></div>
        <div class="absolute top-1/4 right-1/4 w-32 h-32 rounded-full bg-gradient-to-r from-primary/20 to-neon/20 animate-bounce pointer-events-none"></div>
        <div class="absolute bottom-1/4 left-1/4 w-24 h-24 rounded-full bg-gradient-to-r from-accent/20 to-primary/20 animate-ping pointer-events-none"></div>
      </div>
    </section>

    <!-- Product Showcase Section -->
    <section id="products" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 bg-gradient-to-b from-transparent via-accent/5 to-transparent">
      <div class="text-center max-w-7xl relative w-full">
        <!-- Section Header -->
        <div class="mb-16">
          <h2 class="text-5xl md:text-7xl font-headline mb-6 glitch-text" data-text="THE COLLECTION">
            <span class="bg-gradient-to-r from-accent via-primary to-neon bg-clip-text text-transparent">
              THE COLLECTION
            </span>
          </h2>
          <p class="text-xl md:text-2xl text-gray-300 font-light">Where cyberpunk meets streetwear</p>
        </div>
        
        <!-- Product Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
          <!-- Product 1 -->
          <div class="product-card group">
            <div class="product-image">
              <div class="w-full h-80 bg-gradient-to-br from-accent/20 to-primary/20 rounded-lg mb-4 flex items-center justify-center">
                <div class="text-6xl">ðŸ‘•</div>
              </div>
              <div class="product-overlay">
                <button class="neon-button small">Quick View</button>
              </div>
            </div>
            <h3 class="text-xl font-headline text-accent mb-2">Neon Rain Hoodie</h3>
            <p class="text-gray-300 mb-4">Premium cyberpunk streetwear with LED accents</p>
            <div class="flex items-center justify-between">
              <span class="text-2xl font-bold text-primary">$89.99</span>
              <button class="neon-button small">Add to Cart</button>
            </div>
          </div>
          
          <!-- Product 2 -->
          <div class="product-card group">
            <div class="product-image">
              <div class="w-full h-80 bg-gradient-to-br from-primary/20 to-neon/20 rounded-lg mb-4 flex items-center justify-center">
                <div class="text-6xl">ðŸ‘–</div>
              </div>
              <div class="product-overlay">
                <button class="neon-button small">Quick View</button>
              </div>
            </div>
            <h3 class="text-xl font-headline text-primary mb-2">Digital Dreams Pants</h3>
            <p class="text-gray-300 mb-4">Futuristic cargo pants with tech pockets</p>
            <div class="flex items-center justify-between">
              <span class="text-2xl font-bold text-neon">$79.99</span>
              <button class="neon-button small">Add to Cart</button>
            </div>
          </div>
          
          <!-- Product 3 -->
          <div class="product-card group">
            <div class="product-image">
              <div class="w-full h-80 bg-gradient-to-br from-neon/20 to-accent/20 rounded-lg mb-4 flex items-center justify-center">
                <div class="text-6xl">ðŸ§¥</div>
              </div>
              <div class="product-overlay">
                <button class="neon-button small">Quick View</button>
              </div>
            </div>
            <h3 class="text-xl font-headline text-neon mb-2">Electric Souls Jacket</h3>
            <p class="text-gray-300 mb-4">Reflective cyberpunk jacket with neon trim</p>
            <div class="flex items-center justify-between">
              <span class="text-2xl font-bold text-accent">$129.99</span>
              <button class="neon-button small">Add to Cart</button>
            </div>
          </div>
        </div>
        
        <!-- View All Products Button -->
        <button class="neon-button large" onclick="window.location.href='/collections/all'">
          <span>View Full Collection</span>
          <svg class="w-6 h-6 ml-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </button>
      </div>
    </section>

    <!-- Chapter 4 - Locked -->
    <section id="chapter-4" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 locked-chapter" data-chapter="4">
      <div class="text-center max-w-4xl relative">
        <div class="mb-8">
          <svg class="w-16 h-16 mx-auto text-muted mb-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>
          </svg>
          <h2 class="text-5xl md:text-6xl font-headline mb-4 text-muted">Chapter 4: Neon Reflections</h2>
          <div class="text-2xl md:text-3xl font-headline text-accent mb-4">Coming Soon</div>
          <div class="text-lg md:text-xl text-gray-400 mb-8 leading-relaxed">
            <p>This chapter is currently locked. Complete the previous chapters to unlock this content.</p>
          </div>
          <div class="bg-gradient-to-r from-accent/20 to-primary/20 border border-accent/30 rounded-lg p-4 max-w-md mx-auto">
            <p class="text-sm text-gray-300">Subscribe to be notified when new chapters are released!</p>
          </div>
        </div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-gradient-to-r from-muted/20 to-muted/10 animate-pulse pointer-events-none"></div>
      </div>
    </section>

    <!-- Chapter 5 - Locked -->
    <section id="chapter-5" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 locked-chapter" data-chapter="5">
      <div class="text-center max-w-4xl relative">
        <div class="mb-8">
          <svg class="w-16 h-16 mx-auto text-muted mb-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>
          </svg>
          <h2 class="text-5xl md:text-6xl font-headline mb-4 text-muted">Chapter 5: The Convergence</h2>
          <div class="text-2xl md:text-3xl font-headline text-primary mb-4">Coming Soon</div>
          <div class="text-lg md:text-xl text-gray-400 mb-8 leading-relaxed">
            <p>This chapter is currently locked. Complete the previous chapters to unlock this content.</p>
          </div>
          <div class="bg-gradient-to-r from-primary/20 to-neon/20 border border-primary/30 rounded-lg p-4 max-w-md mx-auto">
            <p class="text-sm text-gray-300">Subscribe to be notified when new chapters are released!</p>
          </div>
        </div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-gradient-to-r from-muted/20 to-muted/10 animate-pulse pointer-events-none"></div>
      </div>
    </section>

    <!-- Chapter 6 - Locked -->
    <section id="chapter-6" class="min-h-screen flex items-center justify-center p-8 relative border-b border-accent/30 locked-chapter" data-chapter="6">
      <div class="text-center max-w-4xl relative">
        <div class="mb-8">
          <svg class="w-16 h-16 mx-auto text-muted mb-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>
          </svg>
          <h2 class="text-5xl md:text-6xl font-headline mb-4 text-muted">Chapter 6: Beyond the Rain</h2>
          <div class="text-2xl md:text-3xl font-headline text-neon mb-4">Coming Soon</div>
          <div class="text-lg md:text-xl text-gray-400 mb-8 leading-relaxed">
            <p>This chapter is currently locked. Complete the previous chapters to unlock this content.</p>
          </div>
          <div class="bg-gradient-to-r from-neon/20 to-accent/20 border border-neon/30 rounded-lg p-4 max-w-md mx-auto">
            <p class="text-sm text-gray-300">Subscribe to be notified when new chapters are released!</p>
          </div>
        </div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-gradient-to-r from-muted/20 to-muted/10 animate-pulse pointer-events-none"></div>
      </div>
    </section>
  </div>
</main>

<!-- Enhanced Cyberpunk Styles -->
<style>
  /* Color Variables */
  :root {
    --accent: #00F0FF;
    --primary: #FF0080;
    --neon: #00FF00;
    --noir: #0F0F0F;
    --muted: #666666;
  }

  /* Glitch effect for headings */
  .glitch-text {
    position: relative;
    display: inline-block;
  }
  
  .glitch-text::before,
  .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0.7;
  }
  
  .glitch-text::before {
    animation: glitch 2s infinite;
    color: var(--primary);
    z-index: -1;
    transform: translate(-2px, 0);
  }
  
  .glitch-text::after {
    animation: glitch 2s infinite reverse;
    color: var(--accent);
    z-index: -2;
    transform: translate(2px, 0);
  }
  
  @keyframes glitch {
    0%, 100% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(-2px, -2px); }
    60% { transform: translate(2px, 2px); }
    80% { transform: translate(2px, -2px); }
  }

  /* Neon Button Styles */
  .neon-button {
    display: inline-flex;
    align-items: center;
    padding: 12px 24px;
    border: 2px solid;
    border-radius: 8px;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  .neon-button.primary {
    background: linear-gradient(45deg, var(--accent), var(--primary));
    border-color: var(--accent);
    color: var(--noir);
    box-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
  }

  .neon-button.primary:hover {
    box-shadow: 0 0 30px rgba(0, 240, 255, 0.6);
    transform: translateY(-2px);
  }

  .neon-button.secondary {
    background: transparent;
    border-color: var(--primary);
    color: var(--primary);
    box-shadow: 0 0 20px rgba(255, 0, 128, 0.3);
  }

  .neon-button.secondary:hover {
    background: var(--primary);
    color: var(--noir);
    box-shadow: 0 0 30px rgba(255, 0, 128, 0.6);
    transform: translateY(-2px);
  }

  .neon-button.small {
    padding: 8px 16px;
    font-size: 0.875rem;
  }

  .neon-button.large {
    padding: 16px 32px;
    font-size: 1.125rem;
  }

  /* Product Card Styles */
  .product-card {
    background: rgba(15, 15, 15, 0.8);
    border: 1px solid rgba(0, 240, 255, 0.2);
    border-radius: 12px;
    padding: 20px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .product-card:hover {
    border-color: var(--accent);
    box-shadow: 0 0 30px rgba(0, 240, 255, 0.2);
    transform: translateY(-5px);
  }

  .product-image {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
  }

  .product-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .product-card:hover .product-overlay {
    opacity: 1;
  }

  /* Chapter Section Styles */
  .chapter-section {
    position: relative;
    overflow: hidden;
  }

  .chapter-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 50% 50%, rgba(0, 240, 255, 0.05) 0%, transparent 70%);
    pointer-events: none;
  }

  /* Cyberpunk grid background */
  .cyber-grid {
    background-image: 
      linear-gradient(rgba(0, 240, 255, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0, 240, 255, 0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: grid-move 20s linear infinite;
  }

  @keyframes grid-move {
    0% { background-position: 0 0; }
    100% { background-position: 50px 50px; }
  }

  /* Glitch Overlay */
  .glitch-overlay {
    background: linear-gradient(45deg, transparent 48%, rgba(255, 0, 128, 0.03) 49%, rgba(255, 0, 128, 0.03) 51%, transparent 52%);
    background-size: 20px 20px;
    animation: glitch-scan 3s linear infinite;
    opacity: 0.1;
  }

  @keyframes glitch-scan {
    0% { background-position: 0 0; }
    100% { background-position: 20px 20px; }
  }

  /* Rain Drop Animation */
  .rain-drop {
    position: absolute;
    width: 2px;
    height: 20px;
    background: linear-gradient(to bottom, transparent, var(--accent), var(--primary));
    border-radius: 1px;
    animation: rain-fall linear infinite;
  }

  @keyframes rain-fall {
    0% {
      transform: translateY(-100vh);
      opacity: 0;
    }
    10% {
      opacity: 0.8;
    }
    90% {
      opacity: 0.8;
    }
    100% {
      transform: translateY(100vh);
      opacity: 0;
    }
  }

  /* Particle Animation */
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: var(--accent);
    border-radius: 50%;
    animation: float linear infinite;
  }

  @keyframes float {
    0% {
      transform: translateY(100vh) translateX(0);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(-100vh) translateX(100px);
      opacity: 0;
    }
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .glitch-text {
      font-size: 3rem;
    }
    
    .neon-button {
      padding: 10px 20px;
      font-size: 0.875rem;
    }
    
    .product-card {
      padding: 15px;
    }
  }
</style>

<script>
  // Enhanced Neon Rain page interactions
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize all effects
    initRainEffect();
    initParticleEffect();
    initScrollAnimations();
    initGlitchEffects();
    initSoundSystem();
    initNavigation();
    
    // Rain Effect System
    function initRainEffect() {
      const rainContainer = document.getElementById('rain-container');
      if (!rainContainer) return;
      
      function createRainDrop() {
        const drop = document.createElement('div');
        drop.className = 'rain-drop';
        drop.style.left = Math.random() * 100 + '%';
        drop.style.animationDuration = (Math.random() * 3 + 2) + 's';
        drop.style.animationDelay = Math.random() * 2 + 's';
        rainContainer.appendChild(drop);
        
        // Remove drop after animation
        setTimeout(() => {
          if (drop.parentNode) {
            drop.parentNode.removeChild(drop);
          }
        }, 5000);
      }
      
      // Create rain drops periodically
      setInterval(createRainDrop, 100);
    }
    
    // Particle Effect System
    function initParticleEffect() {
      const particlesContainer = document.getElementById('particles-container');
      if (!particlesContainer) return;
      
      function createParticle() {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDuration = (Math.random() * 10 + 5) + 's';
        particle.style.animationDelay = Math.random() * 5 + 's';
        particlesContainer.appendChild(particle);
        
        // Remove particle after animation
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, 15000);
      }
      
      // Create particles periodically
      setInterval(createParticle, 2000);
    }
    
    // Scroll Animations
    function initScrollAnimations() {
      const chapters = document.querySelectorAll('section[data-chapter]');
      
      // Intersection Observer for scroll animations
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('opacity-100', 'transform', 'translate-y-0');
            entry.target.classList.remove('opacity-0', 'translate-y-8');
          }
        });
      }, { 
        threshold: 0.3,
        rootMargin: '0px 0px -100px 0px'
      });
      
      // Initialize chapters with fade-in effect
      chapters.forEach((chapter, index) => {
        chapter.classList.add('opacity-0', 'translate-y-8', 'transition-all', 'duration-1000');
        chapter.style.transitionDelay = `${index * 200}ms`;
        observer.observe(chapter);
      });
    }
    
    // Glitch Effects
    function initGlitchEffects() {
      const glitchElements = document.querySelectorAll('.glitch-text');
      
      glitchElements.forEach(element => {
        element.addEventListener('mouseenter', function() {
          this.style.animationPlayState = 'paused';
          this.style.animationDuration = '0.1s';
        });
        
        element.addEventListener('mouseleave', function() {
          this.style.animationPlayState = 'running';
          this.style.animationDuration = '2s';
        });
      });
    }
    
    // Sound System
    function initSoundSystem() {
      window.soundEnabled = false;
      window.audioContext = null;
    }
    
    // Navigation Functions
    function initNavigation() {
      // Smooth scrolling to chapters
      window.scrollToChapter = function(chapterNumber) {
        const targetChapter = document.querySelector(`[data-chapter="${chapterNumber}"]`);
        if (targetChapter) {
          targetChapter.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          });
        }
      };
      
      // Scroll to products
      window.scrollToProducts = function() {
        const productsSection = document.getElementById('products');
        if (productsSection) {
          productsSection.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          });
        }
      };
      
      // Toggle sound
      window.toggleSound = function() {
        const soundText = document.getElementById('sound-text');
        if (!soundText) return;
        
        if (window.soundEnabled) {
          window.soundEnabled = false;
          soundText.textContent = 'Enable Audio';
          // Stop any playing audio
          if (window.audioContext) {
            window.audioContext.suspend();
          }
        } else {
          window.soundEnabled = true;
          soundText.textContent = 'Audio On';
          // Initialize audio context
          if (!window.audioContext) {
            window.audioContext = new (window.AudioContext || window.webkitAudioContext)();
          }
          window.audioContext.resume();
        }
      };
    }
    
    // Parallax effect for background elements
    window.addEventListener('scroll', function() {
      const scrolled = window.pageYOffset;
      const parallaxElements = document.querySelectorAll('.cyber-grid, .glitch-overlay');
      
      parallaxElements.forEach((element, index) => {
        const speed = 0.5 + (index * 0.1);
        element.style.transform = `translateY(${scrolled * speed}px)`;
      });
    });
    
    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      switch(e.key) {
        case 'ArrowDown':
          e.preventDefault();
          window.scrollBy(0, window.innerHeight);
          break;
        case 'ArrowUp':
          e.preventDefault();
          window.scrollBy(0, -window.innerHeight);
          break;
        case ' ':
          e.preventDefault();
          if (window.soundEnabled) {
            // Play a sound effect
            playSoundEffect();
          }
          break;
      }
    });
    
    // Sound effect function
    function playSoundEffect() {
      if (!window.audioContext || !window.soundEnabled) return;
      
      const oscillator = window.audioContext.createOscillator();
      const gainNode = window.audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(window.audioContext.destination);
      
      oscillator.frequency.setValueAtTime(800, window.audioContext.currentTime);
      oscillator.frequency.exponentialRampToValueAtTime(200, window.audioContext.currentTime + 0.1);
      
      gainNode.gain.setValueAtTime(0.1, window.audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, window.audioContext.currentTime + 0.1);
      
      oscillator.start(window.audioContext.currentTime);
      oscillator.stop(window.audioContext.currentTime + 0.1);
    }
    
    // Performance optimization: Throttle scroll events
    let ticking = false;
    function updateOnScroll() {
      if (!ticking) {
        requestAnimationFrame(function() {
          // Update any scroll-based animations here
          ticking = false;
        });
        ticking = true;
      }
    }
    
    window.addEventListener('scroll', updateOnScroll);
  });
</script>

